#include <ArxContainer.h>

enum class Dir
{
    N = 1,
    E = 2,
    S = -1,
    W = -2,
};

namespace Direction
{
    // Auto-generated by "../script/codegen.py"
    // This is the direction matrix for the map.
    // It is used to decide which way to turn at a junction.
    // If the desired path is from node 3 to node 5,
    // then `dir_matrix[3][5]` will give the compass direction to head
    // based on the pre-calculated shortest path.
    int dir_matrix[20][20] = {{0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
                              {1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
                              {1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
                              {-1, 2, 2, 0, 2, 2, 2, 2, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 2},
                              {-2, 2, 2, -2, 0, 1, 2, 2, -2, -2, -2, -2, 2, -2, -2, -2, -2, -2, -2, 2},
                              {-1, -1, -1, -1, -1, 0, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1},
                              {-2, -1, 2, -2, -2, -2, 0, 2, -2, -2, 2, 2, 2, -2, -2, -2, 2, 2, -2, 2},
                              {-2, -2, -1, -2, -2, -2, -2, 0, -2, 1, 1, 1, 1, 1, 1, 1, 1, 1, -2, 1},
                              {-1, -1, -1, -1, -1, -1, -1, -1, 0, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 2},
                              {-2, -2, 2, -2, -2, -2, -2, 2, -2, 0, 2, 2, 2, 1, 1, 1, 1, 1, -2, 2},
                              {-2, 2, 2, -2, -2, -2, 2, 2, -2, -2, 0, -1, 2, -2, -2, -2, 2, 2, -2, 2},
                              {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1},
                              {-1, -1, -1, -1, -1, -1, -1, -1, -2, -2, -2, -2, 0, -2, -2, 1, 1, 1, -2, 1},
                              {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 0, -2, 1, 1, 1, 1, 1},
                              {2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 0, 2, 2, 2, 2, 2},
                              {-2, -2, 2, -2, -2, -2, -2, 2, -2, -1, -1, -1, 2, -1, -1, 0, 2, 2, -2, 2},
                              {-2, 2, 2, -2, -2, -2, 2, 2, -2, -2, 2, 2, 2, -2, -2, -2, 0, -1, -2, 2},
                              {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1},
                              {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 2, 2, 2, 2, 2, 0, 2},
                              {-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -2, -2, -2, -2, -2, -2, 0}};

    // Auto-generated by "../script/codegen.py"
    // This is a mapping of (node, direction) to the node immediately in that direction.
    // This is useful to keep track of the robot's position.
    arx::map<arx::pair<int, int>, int> navigation_map = {
        {{3, 2}, 4},
        {{6, -2}, 4},
        {{10, 2}, 12},
        {{2, 1}, 7},
        {{4, 1}, 5},
        {{5, -1}, 4},
        {{7, 1}, 12},
        {{15, 2}, 16},
        {{15, -1}, 13},
        {{17, 1}, 16},
        {{3, -1}, 0},
        {{18, -1}, 8},
        {{8, 2}, 9},
        {{12, 1}, 19},
        {{15, -2}, 18},
        {{6, 2}, 7},
        {{14, 2}, 13},
        {{4, 2}, 6},
        {{19, -1}, 12},
        {{12, -2}, 10},
        {{6, -1}, 1},
        {{8, -1}, 3},
        {{16, 2}, 19},
        {{16, -1}, 17},
        {{18, 2}, 15},
        {{4, -2}, 3},
        {{9, 1}, 13},
        {{13, -1}, 9},
        {{9, 2}, 10},
        {{1, 1}, 6},
        {{3, 1}, 8},
        {{8, 1}, 18},
        {{13, -2}, 14},
        {{0, 1}, 3},
        {{10, -2}, 9},
        {{12, -1}, 7},
        {{9, -2}, 8},
        {{10, -1}, 11},
        {{11, 1}, 10},
        {{16, -2}, 15},
        {{19, -2}, 16},
        {{13, 1}, 15},
        {{7, -2}, 6},
        {{7, -1}, 2},
    };

}